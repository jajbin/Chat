<!DOCTYPE html>
<html>
<head>
  <title>Real-Time Chat Application</title>
  <style>
    #chat-window {
      height: 500px;
      width: 600px;
      border: 1px solid black;
      overflow-y: scroll;
    }
  </style>
</head>
<body>
  <div id="chat-window"></div>
  <input type="text" id="chat-input">
  <button id="chat-submit">Send</button>

  <!-- Include the WebSockets library -->
  <script src="https://cdn.jsdelivr.net/npm/@aspnet/signalr@3.1.7/dist/browser/signalr.js"></script>
  <script>
    // Connect to the WebSockets server
    const connection = new signalR.HubConnectionBuilder()
      .withUrl("/chatHub")
      .build();

    connection.start().then(function () {
      // Send a message to the server
      document.getElementById("chat-submit").addEventListener("click", function () {
        const message = document.getElementById("chat-input").value;
        connection.invoke("SendMessage", message).catch(function (err) {
          return console.error(err.toString());
        });
        document.getElementById("chat-input").value = "";
      });
    });

    // Receive messages from the server
    connection.on("ReceiveMessage", function (user, message) {
      const chatWindow = document.getElementById("chat-window");
      const messageLine = document.createElement("div");
      messageLine.innerHTML = user + ": " + message;
      chatWindow.appendChild(messageLine);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    });
  </script>
</body>
</html>
